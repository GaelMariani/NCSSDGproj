---
title: "Part_1"
author: "Gael Mariani"
date: "`r Sys.Date()`"
output: 
  html_document:
    keep_md: true
---

```{r setup, include=FALSE, message = FALSE}
knitr::opts_chunk$set(echo = TRUE)
devtools::load_all()
```

## Relationships between NCS implementation and SDG achievement

```{r message = FALSE}
raw_dat <- NCSSDGproj::read_matrix()

pathSDG <- NCSSDGproj::load_SDG_icon()
pathNCS <- NCSSDGproj::load_NCS_icon()

icon_SDG <- NCSSDGproj::format_icons(pathSDG, icon_SDG = TRUE)
icon_NCS <- NCSSDGproj::format_icons(pathNCS, icon_SDG = FALSE)

data_long <- NCSSDGproj::matrix_to_longDF(matrix01 = raw_dat)
SDG_matrix <- NCSSDGproj::matrix_SDG(data_long = data_long)
SDG_net <- NCSSDGproj::matrix_to_network(matrix = SDG_matrix, mode1 = "P" , mode2 = "A")

NCSSDGproj::plot_network(SDG_net, SDG_matrix,
                         icon_SDG = icon_SDG,icon_NCS = icon_NCS,
                         nodes_col = c(rep("#66c2a5", 4), rep("#e5c494", 4), rep("#8da0cb", 3)),
                         save = TRUE)

data_pour <- NCSSDGproj::perc_SDG(data_long = data_long)

NCSSDGproj::barplot_percSDG(data_plot = data_pour, save = TRUE)
```

## Target Insurance and null models

```{r warning = FALSE, message = TRUE}

matrix01 <- NCSSDGproj::contingency_mat_targets(raw_dat)

mod_nest_res <- NCSSDGproj::NullModels(matrix01 = matrix01, rawdata = raw_dat, NMalgo = "quasiswap", NESTmethod = "NODF",
                                       Nrun = 5, Nsim = 5, TargetInsurance = FALSE)

TUI_TOI_res <- NCSSDGproj::NullModels(matrix01 = matrix01, rawdata = raw_dat, NMalgo = "r00", NESTmethod = "NODF",
                                      Nrun = 5, Nsim = 5, TargetInsurance = TRUE)


data_Insurance <- NCSSDGproj::Insurance_data2plot(matrix01 = matrix01, Ntarget = ncol(matrix01)) 
```


```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
